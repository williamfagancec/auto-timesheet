# Production Environment Variables Template
# Copy this file and fill in your actual production values

# =============================================================================
# DATABASE (Neon PostgreSQL)
# =============================================================================
# Get this from your Neon dashboard - use the POOLED connection string
# IMPORTANT: Add connection_limit and pool_timeout parameters
DATABASE_URL="postgresql://user:password@ep-xxx-pooler.neon.tech/timetracker?sslmode=require&connection_limit=20&pool_timeout=10"

# =============================================================================
# REDIS (Upstash)
# =============================================================================
# Get this from Upstash dashboard - use the TLS endpoint (rediss://)
REDIS_URL="rediss://default:password@region-redis.upstash.io:6379"

# =============================================================================
# AUTHENTICATION
# =============================================================================
# Generate with: openssl rand -hex 32
SESSION_SECRET="your-64-character-hex-secret-here"

# Generate with: openssl rand -hex 32
# IMPORTANT: Same key used for Google OAuth AND RM tokens
ENCRYPTION_KEY="your-64-character-hex-encryption-key-here"

# =============================================================================
# GOOGLE OAUTH (Google Cloud Console)
# =============================================================================
# From Google Cloud Console > APIs & Services > Credentials
GOOGLE_CLIENT_ID="873476612967-xxxxxxxxxx.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="GOCSPX-your-secret-here"

# CRITICAL: Update this to your Railway deployment URL
# Must also be registered in Google Cloud Console > Authorized redirect URIs
GOOGLE_REDIRECT_URI="https://your-app-name.railway.app/auth/google/callback"

# =============================================================================
# API CONFIGURATION
# =============================================================================
PORT=3001
HOST="0.0.0.0"
NODE_ENV="production"

# CRITICAL: Set this to your Vercel frontend URL
# Used for CORS and OAuth redirect after login
FRONTEND_URL="https://your-app-name.vercel.app"

# =============================================================================
# VERCEL FRONTEND ENVIRONMENT VARIABLES
# =============================================================================
# Set this in Vercel dashboard, NOT here (client-side exposed)
# VITE_API_URL="https://your-app-name.railway.app"

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
# 1. [ ] Generate SESSION_SECRET with: openssl rand -hex 32
# 2. [ ] Generate ENCRYPTION_KEY with: openssl rand -hex 32
# 3. [ ] Copy DATABASE_URL from Neon dashboard (POOLED connection)
# 4. [ ] Copy REDIS_URL from Upstash dashboard
# 5. [ ] Deploy to Railway and get deployment URL
# 6. [ ] Update GOOGLE_REDIRECT_URI with Railway URL
# 7. [ ] Add Railway URL to Google Cloud Console > Authorized redirect URIs
# 8. [ ] Set Google OAuth consent screen to "Internal" (Workspace only)
# 9. [ ] Deploy to Vercel and get deployment URL
# 10. [ ] Update FRONTEND_URL with Vercel URL
# 11. [ ] Set VITE_API_URL in Vercel dashboard to Railway URL

# =============================================================================
# POST-DEPLOYMENT TESTING
# =============================================================================
# 1. [ ] Test health endpoint: curl https://your-app.railway.app/health
# 2. [ ] Test login page loads: https://your-app.vercel.app/login
# 3. [ ] Test email/password signup works
# 4. [ ] Test Google OAuth flow completes
# 5. [ ] Test calendar sync runs (check Railway logs)
# 6. [ ] Verify cookies are set correctly (check browser dev tools)
